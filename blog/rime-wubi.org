#+TITLE: 效率: Rime 输入法(五笔)
#+DATE: <2020-04-19 Sun>
#+OPTIONS: toc:nil num:nil

有些工具, 属于前期投入成本高, 但价值半衰弱期长, 对应到重要不紧急的象限, 值得你花时间去研究. 输入法就是其中之一, 本文记录自己折腾 [[https://rime.im/][Rime]] 输入法的过程.

** 下载安装 Rime
1. 下载 Mac 对应的安装包 Squirrel-X.XX.X.zip
2. 解压后安装 PKG
3. 重启电脑

** 了解用户配置
Rime 输入法也有 =文本为王= 的理念. 它的 =配置文件= =输入方案定义= 以及 =词典文件= , 均是文本文件(YAML 格式), 使用 Emacs 编辑刚刚好.

在安装部署完成后, Rime 会在路径 =~/Library/Rime/= 存放 _用户资料_ , 主要包括:

 #+begin_src shell
 ls ~/Library/Rime
 #+end_src

 #+RESULTS:
 | installation.yaml | 安装信息     |
 | user.yaml         | 用户状态信息 |

*方案定义*

#+begin_example
Rime 中的输入方案 = 方案定义(<方案标识>.schema.yaml) +
                    词典文件(<词典名>.dict.yaml)
#+end_example

方案定义以 =wubi86_jidian.schema.yaml= 为例:
#+begin_example
schema:
  schema_id: wubi86_jidian  #Rime 识别的 ID
  name: "极点五笔 86"       #选择方案时显示的名称
  version: "1.0"
  author:
    - 创始人 王永民先生
  description: |
    五笔字形 86 极点极爽版
  dependencies:
    - pinyin_simp
#+end_example

词典文件以 =wubi86_jidian.dict.yaml= 为例:
#+begin_example
name: wubi86_jidian
version: "4.3"
sort: by_weight #by_weight/权重 original/原始
import_tables: #此处是添加用户自定义词库的地方
  - wubi86_jidian_user
columns: #码表格式
  - text #文字
  - code #输入码
  - weight #权重
  - stem
#+end_example

** 配置五笔
1. 下载五笔配置文件
  #+begin_src shell
  ,#+begin_src shell
  cd ~/Downloads
  git clone https://github.com/KyleBing/rime-wubi86-jidian
  mv rime-wubi86-jidian/* ~/library/Rime/
  ,#+end_src
  #+end_src

  拷贝后文件列表如下:
  #+begin_example
  .
  ├── README.md                               # 当前说明文档
  ├── numbers.schema.yaml                     # 输入方案 - 大写数字
  ├── rime.lua                                # 可以输出系统变量的函数
  ├── default.custom.yaml                     # 自定义一些输入法的功能：标点，二三候选等
  ├── pinyin_simp.dict.yaml                   # 简体拼音码表 - 五笔中拼音输入需要的
  ├── pinyin_simp.schema.yaml                 # 输入方案 - 简体拼音
  ├── squirrel.custom.yaml                    # 鼠须管（for macOS）输入法候选词界面
  ├── weasel.custom.yaml                      # 小狼毫（for Windows）输入法候选词界面
  ├── wubi86_jidian.dict.yaml                 # 极点 - 五笔码表
  ├── wubi86_jidian.schema.yaml               # 输入方案 - 极点五笔
  ├── wubi86_jidian_user.dict.yaml            # 扩展词库 - 用户个人词库
  ├── wubi86_jidian_extra_brand.dict.yaml     # 扩展词库 - 品牌
  ├── wubi86_jidian_extra_event.dict.yaml     # 扩展词库 - 事件相关
  ├── wubi86_jidian_extra_english.dict.yaml   # 扩展词库 - 常用英文
  ├── wubi86_jidian_extra_location.dict.yaml  # 扩展词库 - 地名
  ├── wubi86_jidian_extra_media.dict.yaml     # 扩展词库 - 影视名，音乐名
  ├── wubi86_jidian_extra_people.dict.yaml    # 扩展词库 - 名人
  ├── wubi86_jidian_extra_pro.dict.yaml       # 扩展词库 - 专业名词
  ├── wubi86_jidian_extra_game.dict.yaml      # 扩展词库 - 游戏
  ├── wubi86_jidian_pinyin.schema.yaml        # 输入方案 - 五笔拼音混输
  └── wubi86_jidian_trad.schema.yaml          # 输入方案 - 五笔简入繁出
  #+end_example

2. 按自己需求自定义
   - [X] 自定义输入框样式
     #+begin_src yaml
     # squirrel.custom.yaml
     patch:
       style:
         color_scheme: ljg
         horizontal: true
         font_point: 28
         label_font_point: 11
         fullscreen: true
         inline_preedit: true # 单行显示
         corner_radius: 6     # 窗口圆角半径

       preset_color_schemes:
         ljg:
           name: ljg
           author: Arthur <i@lijigang.com>
           text_color: 0x666666
           candidate_text_color: 0x000000
           back_color: 0xFFFFFF
           border_color: 0xE2E2E2
           hilited_text_color: 0x000000
           hilited_back_color: 0xFFFFFF
           hilited_candidate_text_color: 0xFFFFFF
           hilited_candidate_back_color: 0xCE7539
     #+end_src

   - [X] 定制候选项的数目为 3 个
     #+begin_src yaml
     # default.custom.yaml
     patch:
       "menu/page_size": 3
     #+end_src

     〔注意〕 如果 default.custom.yaml 裏面已經有其他設定內容，只要以相同的縮進
     方式添加 patch: 以下的部分，不可重複 patch: 這一行。

     重新布署后可生效.

   - [X] 定制标点符号 =/= 键输入 =、=
      #+begin_src yaml
      # wubi86_jidian.schema.yaml
      punctuator:
        import_preset: default
        full_shape:     # 增加这个
          "/" : "、"    # 增加这个
        half_shape:     # 增加这个
          "/" : "、"    # 增加这个

      #+end_src

3. 重新布署

  【鼠鬚管】在系统输入法菜单中选择「重新布署」即可.
